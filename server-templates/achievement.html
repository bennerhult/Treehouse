<div ng-include src="'/server-templates/includes/userInfo.html'"></div>
<div ng-include src="'/server-templates/includes/desktopMenu.html'"></div>
<div class="content">

    <div class="section">
        <div class="twothirds">
            <h3>{{achievement.title}}</h3>
            <p class="dark">
                {{achievement.description}}
            </p>
        </div>
        <div class="onethird">
            <div class="progressWrap">
                <img class="border" width="96" height="96" ng-src="{{achievement.imageURL}}" alt="{{achievement.title}}">
                <span class="gradient-bg"></span>
                <span class="progressbar"></span>
                <div class="progress-container"><span class="progress" style="width:{{achievement.percentageCompleted}}%"></span></div>
            </div>
        </div>
        <div class="clear"></div>
    </div>
    <div class="section">
        <div class="tabs">
            <a href="#" ng-click="openMyProgressTab($event)"><span class="selected">My progress</span></a>
            <a href="#" ng-click="openShareTab($event)"><span>Share</span></a>
            <a href=""><span>Compare (not implemented)</span></a>
        </div>
        <div class="listWrap">
            <div class="item" ng-show="showingMyProgressTab" ng-repeat="currentGoal in achievement.goals">
                <table>
                    <tr>
                        <td class="goal">
                            <p>{{currentGoal.title}} {{currentGoal.latestUpdated}}</p>
                            <div class="progressWrap">
                                <span class="progressbar"></span>
                                <div class="progress-container"><span class="progress" style="width:{{currentGoal.percentageCompleted}}%"></span></div>
                            </div>
                            <div class="counter">
                                <p>{{currentGoal.quantityCompleted}}/{{currentGoal.quantityTotal}}</p>
                            </div>
                        </td>
                        <td class="quantity">
                            <a href="#" ng-click="progress($event, currentGoal)"><img src="/content/img/+.png" alt="I did it!"></a>
                        </td>
                    </tr>
                </table>
            </div>
            <div class="item" ng-show="showingShareTab" ng-repeat="currentFriend in shareToList">
                Friend found
            </div>

        </div>
    </div>

    <div class="header">
        <span class="create-link"><a href="#" ng-show="achievement.publiclyVisible" ng-click="unpublicize($event)">Unpublicize</a></span>
        <span class="create-link"><a href="#" ng-hide="achievement.publiclyVisible" ng-click="publicize($event)">Publicize</a></span>
        <span class="create-link"><a href="#">Edit(not implemented)</a></span>
        <span class="create-link"><a href="/app/achievements" ng-click="deleteAchievement($event)">Delete</a></span>
    </div>

    <div class="header" ng-show="achievement.publiclyVisible">
        <span class="create-link" ><a href="/public/achievementInstance/{{achievement._id}}">Visit public badge</a></span>
    </div>

    <div class="clear"> </div>
</div>
<div class="clear"></div>
<div ng-include src="'/server-templates/includes/bottomMenu.html'"></div>